// create a 3D camera rotated 90 degrees or pi/2
let mainCamera = new GCamera(0, 0, 100, 0.5, Math.PI/2, 0);

// this image needs to fill the whole screen 160x120
let img_buf = image.create(scene.screenWidth(), scene.screenHeight())

// create a scene object to store the spikes
let mainScene = new GScene([mainCamera], 0, [], []);

// add some background music
music.play(music.createSong(hex`
    003c000a64170200001c00010a006400f401640000040000000000000000000000000005000002e22300000b00033833201600210001202d0038000338332043004e0001205a0065000338332070007b00011b86009100033833209d00a8000122b300be0003383323ca00d5000123e000eb0003383323f600010101230d0118010338332223012e0101222e0139010238333a014501012350015b01033833226601710103342f1c7d018801011c93019e0103342f1caa01b501011cc001cb0103342f1cd601e101011ced01f80103342f1c03020e02011c1a02250203332e1b30023b02011b4602510203332e1b5d026802011b73027e0203332e218a02950201219502a00202332ea002ab020121b602c10203332e21cd02d802053833202c38e302ee020120fa020503053833202f3b10031b0301202603310305383320333f3d034803011b53035e0304383320386a037503012280038b03033833239603a1030123ad03b803043833233ac303ce030123da03e50303383322f003fb030122fb0306040238330604110402233b1d0428040338332233043e0405342f1c2c384a045504011c60046b0405342f1c2f3b76048104011c8d04980405342f1c333fa304ae04011cba04c50404342f1c38d004db04011ce604f10403332e1bfd040805011b13051e0504332e1b3a2a053505011b40054b0503332e215605610501
    2162056d0502332e6d05780506213b1b1d1f2183058e0505332e211b1d8e059905011b9a05a505073833202c381918b005bb050120c605d105073833202f3b1f21dd05e8050120f305fe0508383320333f1d1b240a061506011b20062b060638332038211f3606410601224d06580605383323191863066e0601237a068506063833233a211f90069b060123a606b10606383322241d1bbd06c8060122c806d306053833241d1bd306de0604233b211fea06f50606383322241d1b00070b0707342f1c2c38191816072107011c2d07380707342f1c2f3b211f43074e07011c5a07650708342f1c333f1d1b2470077b07011c8607910706342f1c38211f9d07a807011cb307be0705332e1b1918ca07d507011be007eb0706332e1b3a211ff6070108011b0d08180806332e21241d1b23082e0801212e08390805332e241d1b3a08450804213b211f50085b0806332e21241d1b66087108073833202c3819187d088808012093089e08073833202f3b1f21aa08b5080120c008cb0808383320333f1d1b24d608e108011bed08f8080638332038211f03090e0901221a09250905383323191830093b09012346095109063833233a211f5d096809012373097e0906383322241d1b8a09950901229509a009053833241d1ba009ab0904233b211fb609c10906383322241d1bcd09d80907342f1c2c381918e309ee09011cfa0905
    0a07342f1c2f3b211f100a1b0a011c260a310a08342f1c333f1d1b243d0a480a011c530a5e0a06342f1c38211f6a0a750a011c800a8b0a05332e1b1918960aa10a011bad0ab80a06332e1b3a211fc30ace0a011bda0ae50a06332e21241d1bf00afb0a0121fb0a060b05332e241d1b060b110b04213b211f1d0b280b06332e21241d1b330b3e0b073833202c3819184a0b550b0120600b6b0b073833202f3b1f21760b810b01208d0b980b08383320333f1d1b24a30bae0b011bba0bc50b0638332038211fd00bdb0b0122e60bf10b053833231918fd0b080c0123130c1e0c063833233a211f2a0c350c0123400c4b0c06383322241d1b560c610c0122620c6d0c053833241d1b6d0c780c04233b211f830c8e0c06383322241d1b9a0ca50c07342f1c2c381918b00cbb0c011cc60cd10c07342f1c2f3b211fdd0ce80c011cf30cfe0c08342f1c333f1d1b240a0d150d011c200d2b0d06342f1c38211f360d410d011c4d0d580d05332e1b1918630d6e0d011b7a0d850d06332e1b3a211f900d9b0d011ba60db10d06332e21241d1bbd0dc80d0121c80dd30d05332e241d1bd30dde0d04213b211fea0df50d06332e21241d1b000e0b0e073833202c381918160e210e01202d0e380e073833202f3b1f21430e4e0e01205a0e650e08383320333f1d1b24700e7b0e011b860e910e0638332038211f9d0ea80e0122b30ebe0e05
    3833231918ca0ed50e0123e00eeb0e063833233a211ff60e010f01230d0f180f06383322241d1b230f2e0f01222e0f390f053833241d1b3a0f450f04233b211f500f5b0f06383322241d1b660f710f07342f1c2c3819187d0f880f011c930f9e0f07342f1c2f3b211faa0fb50f011cc00fcb0f08342f1c333f1d1b24d60fe10f011ced0ff80f06342f1c38211f03100e10011c1a10251005332e1b191830103b10011b4610511006332e1b3a211f5d106810011b73107e1006332e21241d1b8a10951001219510a01005332e241d1ba010ab1004213b211fb610c11006332e21241d1bcd10d810073833202c381918e310ee100120fa100511073833202f3b1f2110111b1101202611311108383320333f1d1b243d114811011b53115e110638332038211f6a117511012280118b110538332319189611a1110123ad11b811063833233a211fc311ce110123da11e51106383322241d1bf011fb110122fb110612053833241d1b0612111204233b211f1d12281206383322241d1b33123e1207342f1c2c3819184a125512011c60126b1207342f1c2f3b211f76128112011c8d12981208342f1c333f1d1b24a312ae12011cba12c51206342f1c38211fd012db12011ce612f11205332e1b1918fd120813011b13131e1306332e1b3a211f2a133513011b40134b1306332e21241d1b56136113012162136d1305332e241d1b6d
    13781304213b211f83138e1306332e21241d1b9a13a513073833202c381918b013bb130120c613d113073833202f3b1f21dd13e8130120f313fe1308383320333f1d1b240a141514011b20142b140638332038211f3614411401224d14581405383323191863146e1401237a148514063833233a211f90149b140123a614b11406383322241d1bbd14c8140122c814d314053833241d1bd314de1404233b211fea14f51406383322241d1b00150b1507342f1c2c38191816152115011c2d15381507342f1c2f3b211f43154e15011c5a15651508342f1c333f1d1b2470157b15011c8615911506342f1c38211f9d15a815011cb315be1505332e1b1918ca15d515011be015eb1506332e1b3a211ff6150116011b0d16181606332e21241d1b23162e1601212e16391605332e241d1b3a16451604213b211f50165b1606332e21241d1b66167116073833202c3819187d168816012093169e16073833202f3b1f21aa16b5160120c016cb1608383320333f1d1b24d616e116011bed16f8160638332038211f03170e1701221a17251705383323191830173b17012346175117063833233a211f5d176817012373177e1706383322241d1b8a17951701229517a017053833241d1ba017ab1704233b211fb617c11706383322241d1bcd17d81707342f1c2c381918e317ee17011cfa17051807342f1c2f3b211f10181b18011c26
    18311808342f1c333f1d1b243d184818011c53185e1806342f1c38211f6a187518011c80188b1805332e1b19189618a118011bad18b81806332e1b3a211fc318ce18011bda18e51806332e21241d1bf018fb180121fb18061905332e241d1b0619111904213b211f1d19281906332e21241d1b33193e19073833202c3819184a195519012060196b19073833202f3b1f217619811901208d19981908383320333f1d1b24a319ae19011bba19c5190638332038211fd019db190122e619f119053833231918fd19081a0123131a1e1a063833233a211f2a1a351a0123401a4b1a06383322241d1b561a611a0122621a6d1a053833241d1b6d1a781a04233b211f831a8e1a06383322241d1b9a1aa51a07342f1c2c381918b01abb1a011cc61ad11a07342f1c2f3b211fdd1ae81a011cf31afe1a08342f1c333f1d1b240a1b151b011c201b2b1b06342f1c38211f361b411b011c4d1b581b05332e1b1918631b6e1b011b7a1b851b06332e1b3a211f901b9b1b011ba61bb11b06332e21241d1bbd1bc81b0121c81bd31b05332e241d1bd31bde1b06213b211f1d1bea1bf51b05332e211d1bf51b001c011b001c0b1c073833202c381918161c211c01202d1c381c073833202f3b1f21431c4e1c01205a1c651c08383320333f1d1b24701c7b1c011b861c911c0638332038211f9d1ca81c0122b31cbe1c053833231918ca1cd51c
    0123e01ceb1c063833233a211ff61c011d01230d1d181d06383322241d1b231d2e1d01222e1d391d053833241d1b3a1d451d04233b211f501d5b1d06383322241d1b661d711d07342f1c2c3819187d1d881d011c931d9e1d07342f1c2f3b211faa1db51d011cc01dcb1d08342f1c333f1d1b24d61de11d011ced1df81d06342f1c38211f031e0e1e011c1a1e251e05332e1b1918301e3b1e011b461e511e06332e1b3a211f5d1e681e011b731e7e1e06332e21241d1b8a1e951e0121951ea01e05332e241d1ba01eab1e04213b211fb61ec11e06332e21241d1bcd1ed81e073833202c381918e31eee1e0120fa1e051f073833202f3b1f21101f1b1f0120261f311f08383320333f1d1b243d1f481f011b531f5e1f0638332038211f6a1f751f0122801f8b1f053833231918961fa11f0123ad1fb81f063833233a211fc31fce1f0123da1fe51f06383322241d1bf01ffb1f0122fb1f0620053833241d1b0620112004233b211f1d20282006383322241d1b33203e2007342f1c2c3819184a205520011c60206b2007342f1c2f3b211f76208120011c8d20982008342f1c333f1d1b24a320ae20011cba20c52006342f1c38211fd020db20011ce620f12005332e1b1918fd200821011b13211e2106332e1b3a211f2a213521011b40214b2106332e21241d1b56216121012162216d2105332e241d1b6d21782106213b211f1d
    1b83218e2105332e211d1b8e219921011b9a21a521073833202c381918b021bb210120c621d121073833202f3b1f21dd21e8210120f321fe2108383320333f1d1b240a221522011b20222b220638332038211f3622412201224d22582205383323191863226e2201237a228522063833233a211f90229b220123a622b12206383322241d1bbd22c8220122c822d322053833241d1bd322de2204233b211fea22f52206383322241d1b00230b2307342f1c2c38191816232123011c2d23382307342f1c2f3b211f43234e23011c5a23652308342f1c333f1d1b2470237b23011c8623912306342f1c38211f9d23a823011cb323be2305332e1b1918ca23d523011be023eb2306332e1b3a211ff6230124011b0d24182406332e21241d1b23242e2401212e24392405332e241d1b3a24452404213b211f50245b2406332e21241d1b66247124073833202c3819187d248824012093249e24073833202f3b1f21aa24b5240120c024cb2408383320333f1d1b24d624e124011bed24f8240638332038211f03250e2501221a25252505383323191830253b25012346255125063833233a211f5d256825012373257e2506383322241d1b8a25952501229525a025053833241d1ba025ab2504233b211fb625c12506383322241d1bcd25d82507342f1c2c381918e325ee25011cfa25052607342f1c2f3b211f10261b26011c262631
    2608342f1c333f1d1b243d264826011c53265e2606342f1c38211f6a267526011c80268b2605332e1b19189626a126011bad26b82606332e1b3a211fc326ce26011bda26e52606332e21241d1bf026fb260121fb26062705332e241d1b0627112704213b211f1d27282706332e21241d1b33273e27073833202c3819184a275527012060276b27073833202f3b1f217627812701208d27982708383320333f1d1b24a327ae27011bba27c5270638332038211fd027db270122e627f127053833231918fd270828012313281e28063833233a211f2a283528012340284b2806383322241d1b56286128012262286d28053833241d1b6d28782804233b211f83288e2806383322241d1b9a28a52807342f1c2c381918b028bb28011cc628d12807342f1c2f3b211fdd28e828011cf328fe2808342f1c333f1d1b240a291529011c20292b2906342f1c38211f36294129011c4d29582905332e1b191863296e29011b7a29852906332e1b3a211f90299b29011ba629b12906332e21241d1bbd29c8290121c829d32905332e241d1bd329de2904213b211fea29f52906332e21241d1b002a0b2a073833202c381918162a212a01202d2a382a073833202f3b1f21432a4e2a01205a2a652a08383320333f1d1b24702a7b2a011b862a912a0638332038211f9d2aa82a0122b32abe2a053833231918ca2ad52a0123e02aeb2a063833
    233a211ff62a012b01230d2b182b06383322241d1b232b2e2b01222e2b392b053833241d1b3a2b452b04233b211f502b5b2b06383322241d1b662b712b07342f1c2c3819187d2b882b011c932b9e2b07342f1c2f3b211faa2bb52b011cc02bcb2b08342f1c333f1d1b24d62be12b011ced2bf82b06342f1c38211f032c0e2c011c1a2c252c05332e1b1918302c3b2c011b462c512c06332e1b3a211f5d2c682c011b732c7e2c06332e21241d1b8a2c952c0121952ca02c05332e241d1ba02cab2c04213b211fb62cc12c06332e21241d1bcd2cd82c093833202c3819182c20e32cee2c0120fa2c052d093833202f3b1f212c20102d1b2d0120262d312d0a383320333f1d1b242c203d2d482d031b271b532d5e2d0838332038211f2c206a2d752d03222e22802d8b2d0738332319182f23962da12d0123ad2db82d083833233a211f2f23c32dce2d0123da2de52d08383322241d1b2e22f02dfb2d0122fb2d062e053833241d1b062e112e06233b211f2f231d2e282e08383322241d1b2e22332e3e2e09342f1c2c381918281c4a2e552e011c602e6b2e09342f1c2f3b211f281c762e812e011c8d2e982e0a342f1c333f1d1b24281ca32eae2e011cba2ec52e08342f1c38211f281cd02edb2e011ce62ef12e07332e1b1918271bfd2e082f011b132f1e2f08332e1b3a211f271b2a2f352f011b402f4b2f08332e21241d1b2d
    21562f612f0121622f6d2f05332e241d1b6d2f782f06213b211f2d21832f8e2f06332e21241d1b9a2fa52f093833202c3819182c20b02fbb2f0120c62fd12f093833202f3b1f212c20dd2fe82f0120f32ffe2f0a383320333f1d1b242c200a301530031b271b20302b300838332038211f2c203630413003222e224d3058300738332319182f2363306e3001237a308530083833233a211f2f2390309b300123a630b13008383322241d1b2e22bd30c8300122c830d330053833241d1bd330de3006233b211f2f23ea30f53008383322241d1b2e2200310b3109342f1c2c381918281c16312131011c2d31383109342f1c2f3b211f281c43314e31011c5a3165310a342f1c333f1d1b24281c70317b31011c8631913108342f1c38211f281c9d31a831011cb331be3107332e1b1918271bca31d531011be031eb3108332e1b3a211f271bf6310132011b0d32183208332e21241d1b2d2123322e3201212e32393205332e241d1b3a32453206213b211f2d2150325b3206332e21241d1b66327132073833202c3819187d328832012093329e32073833202f3b1f21aa32b5320120c032cb3208383320333f1d1b24d632e132011bed32f8320638332038211f03330e3301221a33253305383323191830333b33012346335133063833233a211f5d336833012373337e3306383322241d1b8a33953301229533a033053833241d
    1ba033ab3304233b211fb633c13306383322241d1bcd33d83307342f1c2c381918e333ee33011cfa33053407342f1c2f3b211f10341b34011c2634313408342f1c333f1d1b243d344834011c53345e3406342f1c38211f6a347534011c80348b3405332e1b19189634a134011bad34b83406332e1b3a211fc334ce34011bda34e53406332e21241d1bf034fb340121fb34063505332e241d1b0635113504213b211f1d35283506332e21241d1b33353e35073833202c3819184a355535012060356b35073833202f3b1f217635813501208d35983508383320333f1d1b24a335ae35011bba35c5350638332038211fd035db350122e635f135053833231918fd350836012313361e36063833233a211f2a363536012340364b3606383322241d1b56366136012262366d36053833241d1b6d36783604233b211f83368e3606383322241d1b9a36a53607342f1c2c381918b036bb36011cc636d13607342f1c2f3b211fdd36e836011cf336fe3608342f1c333f1d1b240a371537011c20372b3706342f1c38211f36374137011c4d37583705332e1b191863376e37011b7a37853706332e1b3a211f90379b37011ba637b13706332e21241d1bbd37c8370121c837d33705332e241d1bd337de3706213b211f1d1bea37f53705332e211d1bf5370038011c00380b38073833202c3819181638213801202d383838073833202f3b
    1f2143384e3801205a38653808383320333f1d1b2470387b38011b863891380638332038211f9d38a8380122b338be38053833231918ca38d5380123e038eb38063833233a211ff638013901230d39183906383322241d1b23392e3901222e393939053833241d1b3a39453904233b211f50395b3906383322241d1b6639713907342f1c2c3819187d398839011c93399e3907342f1c2f3b211faa39b539011cc039cb3908342f1c333f1d1b24d639e139011ced39f83906342f1c38211f033a0e3a011c1a3a253a05332e1b1918303a3b3a011b463a513a06332e1b3a211f5d3a683a011b733a7e3a06332e21241d1b8a3a953a0121953aa03a05332e241d1ba03aab3a04213b211fb63ac13a06332e21241d1bcd3ad83a073833202c381918e33aee3a0120fa3a053b073833202f3b1f21103b1b3b0120263b313b08383320333f1d1b243d3b483b011b533b5e3b0638332038211f6a3b753b0122803b8b3b053833231918963ba13b0123ad3bb83b063833233a211fc33bce3b0123da3be53b06383322241d1bf03bfb3b0122fb3b063c053833241d1b063c113c04233b211f1d3c283c06383322241d1b333c3e3c07342f1c2c3819184a3c553c011c603c6b3c07342f1c2f3b211f763c813c011c8d3c983c08342f1c333f1d1b24a33cae3c011cba3cc53c06342f1c38211fd03cdb3c011ce63cf13c05332e1b1918fd3c
    083d011b133d1e3d06332e1b3a211f2a3d353d011b403d4b3d06332e21241d1b563d613d0121623d6d3d05332e241d1b6d3d783d06213b211f1d1b833d8e3d05332e211d1b8e3d993d011b9a3da53d073833202c381918b03dbb3d0120c63dd13d073833202f3b1f21dd3de83d0120f33dfe3d08383320333f1d1b240a3e153e011b203e2b3e0638332038211f363e413e01224d3e583e053833231918633e6e3e01237a3e853e063833233a211f903e9b3e0123a63eb13e06383322241d1bbd3ec83e0122c83ed33e053833241d1bd33ede3e04233b211fea3ef53e06383322241d1b003f0b3f07342f1c2c381918163f213f011c2d3f383f07342f1c2f3b211f433f4e3f011c5a3f653f08342f1c333f1d1b24703f7b3f011c863f913f06342f1c38211f9d3fa83f011cb33fbe3f05332e1b1918ca3fd53f011be03feb3f06332e1b3a211ff63f0140011b0d40184006332e21241d1b23402e4001212e40394005332e241d1b3a40454004213b211f50405b4006332e21241d1b66407140073833202c3819187d408840012093409e40073833202f3b1f21aa40b5400120c040cb4008383320333f1d1b24d640e140011bed40f8400638332038211f03410e4101221a41254105383323191830413b41012346415141063833233a211f5d416841012373417e4106383322241d1b8a41954101229541a041053833241d1ba0
    41ab4104233b211fb641c14106383322241d1bcd41d84107342f1c2c381918e341ee41011cfa41054207342f1c2f3b211f10421b42011c2642314208342f1c333f1d1b243d424842011c53425e4206342f1c38211f6a427542011c80428b4205332e1b19189642a142011bad42b84206332e1b3a211fc342ce42011bda42e54206332e21241d1bf042fb420121fb42064305332e241d1b0643114304213b211f1d43284306332e21241d1b33433e43073833202c3819184a435543012060436b43073833202f3b1f217643814301208d43984308383320333f1d1b24a343ae43011bba43c5430638332038211fd043db430122e643f143053833231918fd430844012313441e44063833233a211f2a443544012340444b4406383322241d1b56446144012262446d44053833241d1b6d44784404233b211f83448e4406383322241d1b9a44a54407342f1c2c381918b044bb44011cc644d14407342f1c2f3b211fdd44e844011cf344fe4408342f1c333f1d1b240a451545011c20452b4506342f1c38211f36454145011c4d45584505332e1b191863456e45011b7a45854506332e1b3a211f90459b45011ba645b14506332e21241d1bbd45c8450121c845d34505332e241d1bd345de4504213b211fea45f54506332e21241d1b00460b46073833202c3819181646214601202d463846073833202f3b1f2143464e4601205a
    46654608383320333f1d1b2470467b46011b864691460638332038211f9d46a8460122b346be46053833231918ca46d5460123e046eb46063833233a211ff646014701230d47184706383322241d1b23472e4701222e473947053833241d1b3a47454704233b211f50475b4706383322241d1b6647714707342f1c2c3819187d478847011c93479e4707342f1c2f3b211faa47b547011cc047cb4708342f1c333f1d1b24d647e147011ced47f84706342f1c38211f03480e48011c1a48254805332e1b191830483b48011b4648514806332e1b3a211f5d486848011b73487e4806332e21241d1b8a48954801219548a04805332e241d1ba048ab4804213b211fb648c14806332e21241d1bcd48d848073833202c381918e348ee480120fa480549073833202f3b1f2110491b4901202649314908383320333f1d1b243d494849011b53495e490638332038211f6a497549012280498b490538332319189649a1490123ad49b849063833233a211fc349ce490123da49e54906383322241d1bf049fb490122fb49064a053833241d1b064a114a04233b211f1d4a284a06383322241d1b334a3e4a07342f1c2c3819184a4a554a011c604a6b4a07342f1c2f3b211f764a814a011c8d4a984a08342f1c333f1d1b24a34aae4a011cba4ac54a06342f1c38211fd04adb4a011ce64af14a05332e1b1918fd4a084b011b134b1e4b06
    332e1b3a211f2a4b354b011b404b4b4b06332e21241d1b564b614b0121624b6d4b05332e241d1b6d4b784b04213b211f834b8e4b06332e211d1b249a4ba54b073833202c381918b04bbb4b0120c64bd14b073833202f3b1f21dd4be84b0120f34bfe4b08383320333f1d1b240a4c154c011b204c2b4c0638332038211f364c414c01224d4c584c053833231918634c6e4c01237a4c854c063833233a211f904c9b4c0123a64cb14c06383322241d1bbd4cc84c0122c84cd34c053833241d1bd34cde4c04233b211fea4cf54c063833221d1b24004d0b4d07342f1c2c381918164d214d011c2d4d384d07342f1c2f3b211f434d4e4d011c5a4d654d08342f1c333f1d1b24704d7b4d011c864d914d06342f1c38211f9d4da84d011cb34dbe4d05332e1b1918ca4dd54d011be04deb4d06332e1b3a211ff64d014e011b0d4e184e06332e21241d1b234e2e4e01212e4e394e05332e241d1b3a4e454e06213b211f1d1b504e5b4e05332e211d1b5b4e664e011b664e714e073833202c3819187d4e884e0120934e9e4e073833202f3b1f21aa4eb54e0120c04ecb4e08383320333f1d1b24d64ee14e011bed4ef84e0638332038211f034f0e4f01221a4f254f053833231918304f3b4f0123464f514f063833233a211f5d4f684f0123734f7e4f06383322241d1b8a4f954f0122954fa04f053833241d1ba04fab4f04233b211fb6
    4fc14f06383322241d1bcd4fd84f07342f1c2c381918e34fee4f011cfa4f055007342f1c2f3b211f10501b50011c2650315008342f1c333f1d1b243d504850011c53505e5006342f1c38211f6a507550011c80508b5005332e1b19189650a150011bad50b85006332e1b3a211fc350ce50011bda50e55006332e21241d1bf050fb500121fb50065105332e241d1b0651115104213b211f1d51285106332e21241d1b33513e51073833202c3819184a515551012060516b51073833202f3b1f217651815101208d51985108383320333f1d1b24a351ae51011bba51c5510638332038211fd051db510122e651f151053833231918fd510852012313521e52063833233a211f2a523552012340524b5206383322241d1b56526152012262526d52053833241d1b6d52785204233b211f83528e5206383322241d1b9a52a55207342f1c2c381918b052bb52011cc652d15207342f1c2f3b211fdd52e852011cf352fe5208342f1c333f1d1b240a531553011c20532b5306342f1c38211f36534153011c4d53585305332e1b191863536e53011b7a53855306332e1b3a211f90539b53011ba653b15306332e21241d1bbd53c8530121c853d35305332e241d1bd353de5304213b211fea53f55306332e21241d1b00540654013306540954013208540b5401310b540e5401300e541154012f11541454012e14541754012d16542154
    012ccc56d75604211f1d1b00001c00010a006400f401640000040000000000000000000000000005000007140453035e030108ad03b803010a06041104010bba04c504010813051e05010a6d057805010b20062b0601087a068506010ad306de06010b860791070108e007eb07010a3a084508010bed08f808010846095109010aa009ab09010b530a5e0a0108ad0ab80a010a060b110b010bba0bc50b0108130c1e0c010a6d0c780c010b200d2b0d01087a0d850d010ad30dde0d010b860e910e0108e00eeb0e010a3a0f450f010bed0ff80f010846105110010aa010ab10010b53115e110108ad11b811010a06121112010bba12c512010813131e13010a6d137813010b20142b1401087a148514010ad314de14010b861591150108e015eb15010a3a164516010bed16f816010846175117010aa017ab17010b53185e180108ad18b818010a06191119010bba19c5190108131a1e1a010a6d1a781a010b201b2b1b01087a1b851b010ad31bde1b010b861c911c0108e01ceb1c010a3a1d451d010bed1df81d0108461e511e010aa01eab1e010b531f5e1f0108ad1fb81f010a06201120010bba20c520010813211e21010a6d217821010b20222b2201087a228522010ad322de22010b862391230108e023eb23010a3a244524010bed24f824010846255125010aa025ab25010b53265e260108ad26b826010a0627112701
    0bba27c527010813281e28010a6d287828010b20292b2901087a298529010ad329de29010b862a912a0108e02aeb2a010a3a2b452b010bed2bf82b0108462c512c010aa02cab2c010b532d5e2d0108ad2db82d010a062e112e010bba2ec52e0108132f1e2f010a6d2f782f010b20302b3001087a308530010ad330de30010b863191310108e031eb31010a3a324532010bed32f832010846335133010aa033ab33010b53345e340108ad34b834010a06351135010bba35c535010813361e36010a6d367836010b20372b3701087a378537010ad337de37010b863891380108e038eb38010a3a394539010bed39f8390108463a513a010aa03aab3a010b533b5e3b0108ad3bb83b010a063c113c010bba3cc53c0108133d1e3d010a6d3d783d010b203e2b3e01087a3e853e010ad33ede3e010b863f913f0108e03feb3f010a3a404540010bed40f840010846415141010aa041ab41010b53425e420108ad42b842010a06431143010bba43c543010813441e44010a6d447844010b20452b4501087a458545010ad345de45010b864691460108e046eb46010a3a474547010bed47f847010846485148010aa048ab48010b53495e490108ad49b849010a064a114a010bba4ac54a0108134b1e4b010a6d4b784b010b204c2b4c01087a4c854c010ad34cde4c010b864d914d0108e04deb4d010a3a4e454e010bed4ef84e010846
    4f514f010aa04fab4f010b53505e500108ad50b850010a06511151010bba51c551010813521e52010a6d527852010b20532b5301087a538553010ad353de53010b
`), music.PlaybackMode.LoopingInBackground)

// spawns the spikes randomly
forever(function() {
    pause(500);
    switch(randint(1,3)) {
        case 1:
            mainScene.objects.push(new GObject(randint(1, 14), spikeVerts, spikeEdges, new Point3(-250, 0, 25)));
            break;
        case 2:
            mainScene.objects.push(new GObject(randint(1, 14), spikeVerts, spikeEdges, new Point3(-250, 0, 0)));
            break;
        default:
            mainScene.objects.push(new GObject(randint(1, 14), spikeVerts, spikeEdges, new Point3(-250, 0, -25)));
    }
    
})

// player movement
controller.left.onEvent(ControllerButtonEvent.Pressed, function() {
    if (robotHead.location.z > -25) {
        robotHead.move(new Point3(0, 0, -25));
    }
})

controller.right.onEvent(ControllerButtonEvent.Pressed, function() {
    if (robotHead.location.z < 25) {
        robotHead.move(new Point3(0, 0, 25));
    }
})

// the score is just incremented every second
info.setScore(0);

game.onUpdateInterval(1000, function() {
    info.changeScoreBy(1);
})

// player state
let alive = true;

game.onUpdate(function on_update() {
    // fill the image with a color (black)
    img_buf.fill(0);

    // render the spikes
    mainScene.render();

    // kill the player after the scene renders so you know if you hit a spike
    if (!alive) {
        game.gameOver(false);
    }

    // the robot is seperate from the scene so it has to be rendered here
    robotHead.physicsTick();
    robotHead.render(mainCamera);

    // jump
    if (controller.A.isPressed() && robotHead.onGround) {
        robotHead.vy = 0.3;
    }

    // iterate through the array backwards so that the indexes don't break when splicing the array
    for (let i = mainScene.objects.length - 1; i >= 0; i--) {
        mainScene.objects[i].move(new Point3(2, 0, 0));

        // check if you should die
        if (mainScene.objects[i].location.distance(robotHead.location) < 8) {
            alive = false;
        }

        // remove objects from the scene if they are far away
        if (mainScene.objects[i].location.distance(new Point3(0, 0, 0)) > 255) {
            mainScene.objects.splice(i, 1);
        }
    }

    // set the makecode background image to the image buffer we wrote to
    scene.setBackgroundImage(img_buf);



    // mainCamera.rotationY  += 0.01;
    
    // mainCamera.rotationX += controller.dy() * 0.01;
    

    
})
